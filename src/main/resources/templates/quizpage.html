<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<title>Kysely</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet"
	href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
	integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
	crossorigin="anonymous">
<link
	href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
	rel="stylesheet">
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
	integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
	crossorigin="anonymous"></script>
<script
	src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
	integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
	crossorigin="anonymous"></script>
<script
	src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
	integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
	crossorigin="anonymous"></script>
</head>
<body>
	<div class="container">
		<div class="p-2">
			<h1 class="d-inline">Kysely</h1>

		</div>

		<!-- Kyselyn nimi ja kuvaus -->
		<div th:object="${quiz}">
			<h2 th:text=*{get().name}></h2>
			<p th:text=*{get().description}></p>
			<div>
				<ol class="list-group">
					<li class="list-group-item" th:each="q : ${quiz.get().questions}">

						<p>
							<b th:text=${q.content}></b>
						</p>
						
						<!-- Vaihtoehdon lisays kentta -->
						<!-- q.type määrittää näkyykö vaihtoehtojen lisäys -->
						<div th:object="${option}"
							th:if="${q.type == 'radiobutton' || q.type == 'checkbox'}">
							<form th:action="${'/question/' + q.id + '/addoption'}"
								action='#' method="post">
								<input type="text" th:field='*{content}' /> <input
									type="submit" value="Lisää vaihtoehto" />
							</form>
						</div>
						
						<!-- Listaa lisatyt vastausvaihtoehdot -->
						<div th:id="'optionsList' + ${q.id}"
							th:if="${q.type == 'radiobutton' || q.type == 'checkbox'}">
							<div class="list-group list-group-flush">
								<p class="list-group-item" th:each="option : ${q.options}"
									th:text="${option}">
								<p />
							</div>
						</div>
						
						<!-- Vastausten nayttaminen nappulaa painamalla -->
						<button class="btn btn-primary" type="button"
							data-toggle="collapse"
							th:data-target="'#collapseAnswer' + ${q.id}"
							aria-expanded="false"
							th:aria-controls="'collapseAnswer' + ${q.id}">Näytä
							vastaukset
						</button>
						
						<!-- Kysyksen poistaminen kyselysta -->
						<form th:action="@{/question/delete/{id}(id=${question.id})}">
							<button class="btn btn-danger">Poista</button>
						</form>
							
						<div class="collapse" th:id="'collapseAnswer' + ${q.id}">
							<!-- https://getbootstrap.com/docs/4.0/components/collapse/ -->
							<ul class="list-group list-group-flush"
								th:each="a : ${q.answers}">

								<li class="list-group-item" th:text="${a.content}"></li>
							</ul>
						</div>
						
					</li>
				</ol>
			</div>
		</div>

		<!-- Kysymyksen lisays -->
		<div th:object="${question}" style="margin-top:25px; ">
			<form th:action="${'/quiz/' + quiz.get().id + '/addquestion'}" action="#" method="post">
		  				<input type="text" id="question" th:field="*{content}" placeholder="Lisää kysymys" style="width:60%"/>
		  				<label for="type">Valitse kysymystyyppi:</label>
						<select id="type" name="type" th:field="*{type}">
						  <option value="text" th:field="*{type}">Teksti</option>
						  <option value="radiobutton" th:field="*{type}">Monivalinta</option>
						  <option value="checkbox">Valintaruudut</option>
						</select>
		  			
				
				<div class="row">
  					<div class="col-md-6">
  						<input type="submit" value="Tallenna" class="btn btn-primary" style="margin-top:5px"/>
  					</div>
  					<div class="col-md-6">
  						
  					</div>
				</div>
			</form>
			<form th:action="${'/'}" action="#" method="post">
				<button class="btn btn-secondary" style="margin-top:5px">Peruuta</button>
			</form>
	</div>


	</div>
</body>
</html>
